# Яндекс.Афиша - Карта интересных мест

Веб-приложение для отображения интересных мест на интерактивной карте с возможностью управления контентом через административную панель.

<img width="600" height="487" alt="Снимок экрана 2025-11-21 125333" src="https://github.com/user-attachments/assets/71c8aaf3-5896-4a63-9a39-26fe6bd8c390" />


## Функциональность

- **Интерактивная карта** с анимированными маркерами мест
- **Детальная информация** о каждом месте с фотогалереей
- **Адаптивный дизайн** для desktop и мобильных устройств
- **Админ-панель** с интуитивным управлением контентом
- **Drag & Drop** сортировка изображений перетаскиванием
- **WYSIWYG редактор** для форматирования описаний
- **GeoJSON API** для взаимодействия с картой

## Технологии

### Backend

- **Python 3.13.4** + **Django 5.2**
- **База данных:** SQLite3
- **Дополнительно:**
  - `django-admin-sortable2` - сортировка перетаскиванием
  - `django-tinymce` - WYSIWYG редактор
  - `environs` - управление переменными окружения с автоматическим преобразованием типов

### Frontend

- **Vue.js 2.6** - реактивные компоненты
- **Leaflet.js** - интерактивные карты
- **Bootstrap 4.5** - адаптивная верстка
- **L.Icon.Pulse** - анимированные маркеры

## Установка и запуск

1. Клонируйте репозиторий
2. Установить зависимости командой:

```bash
pip install -r requirements.txt
```

3. Настройка переменных окружения

Создать файл `.env` в корне проекта:

```env
SECRET_KEY=your-secret-key-here
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1
STATIC_ROOT=staticfiles
MEDIA_ROOT=media
```

`SECRET_KEY` - Секретный ключ Django - используется для криптографической подписи. Должен быть уникальным и непредсказуемым значением. В продакшене никогда не используйте дефолтные значения. [Документация](https://docs.djangoproject.com/en/5.2/ref/settings/#secret-key)

`DEBUG` - Режим отладки - булево значение (True/False). Включает детальные страницы ошибок с информацией о настройках и среде выполнения. Никогда не включайте в продакшене! [Документация](https://docs.djangoproject.com/en/5.2/ref/settings/#debug)

`ALLOWED_HOSTS` - Разрешенные хосты - список доменов/хостов, которые может обслуживать Django. Защита от HTTP Host header атак. При DEBUG=True проверка отключается. [Документация](https://docs.djangoproject.com/en/5.2/ref/settings/#allowed-hosts)

`STATIC_ROOT` - Путь для статических файлов - абсолютный путь к каталогу, где collectstatic будет собирать статические файлы для продакшена. [Документация](https://docs.djangoproject.com/en/5.2/ref/settings/#static-root)

`MEDIA_ROOT` - Путь для медиафайлов - абсолютный путь к файловой системе для хранения загруженных пользователем файлов (изображения мест). [Документация](https://docs.djangoproject.com/en/5.2/ref/settings/#media-root)

4. Настройка базы данных

```bash
# Применение миграций
python manage.py migrate

# Создание администратора
python manage.py createsuperuser

# Загрузка тестовых данных
# Для загрузки тестовых данных выполните:
# Загрузка всех тестовых мест (из встроенных примеров)
python manage.py load_all_places

# Или для загрузки конкретного места по URL:
# Загрузка данных с удаленного JSON-файла
python manage.py load_place https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/places/example-place.json
```

Пример работающего URL:

```text
https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/places/Антикафе%20Bizone.json
```

Пример структуры данных:

```json
{
    "title": "Название места",
    "imgs": [
        "https://example.com/photo1.jpg",
        "https://example.com/photo2.jpg"
    ],
    "description_short": "Краткое описание",
    "description_long": "<p>Подробное описание с HTML</p>",
    "coordinates": {
        "lng": "37.617634",
        "lat": "55.755826"
    }
}
```

5. Запуск сервера

```bash
python manage.py runserver
```

Приложение будет доступно по адресу: http://localhost:8000

Админ-панель: http://localhost:8000/admin

## Структура проекта

```text
django_yandex_afisha_project/
├── catalog/                  # Основное приложение
│   ├── management/
│   │   └── commands/         # Кастомные команды управления
│   ├── migrations/           # Миграции БД
│   ├── models.py             # Модели: Place, Image
│   ├── admin.py              # Конфигурация админ-панели
│   └── views.py              # Представления
├── media/places/             # Загруженные изображения
├── static/                   # Статические файлы
├── templates/                # HTML шаблоны
└── where_to_go/              # Настройки проекта
```

## Использование

**Для посетителей сайта:**
- **Откройте главную страницу** - просмотрите карту с пульсирующими маркерами
- **Выберите место** - кликните на маркер для просмотра информации
- **Изучите контент** - листайте фотографии, читайте описания
- **Адаптивный дизайн** - работает на всех устройствах

**Для администраторов:**
- **Доступ к админ-панели** - /admin
- **Управление местами** - CRUD операции с локациями
- **Сортировка изображений** - drag & drop интерфейс
- **Визуальное редактирование** - WYSIWYG редактор для текстов

## Особенности

- **Сортировка изображений** перетаскиванием в админке
- **Предпросмотр изображений** в списке файлов
- **Автоматическое позиционирование** изображений
- **GeoJSON API** для карты
- **Кастомные команды** для импорта данных

### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).
